<!DOCTYPE html>
<html lang="pt">
<head>
  <meta charset="UTF-8">
  <title>APRODET Dashboard - Gestão Patrimonial</title>

  <!-- Bibliotecas -->
  <script src="https://cdn.jsdelivr.net/npm/xlsx@0.18.5/dist/xlsx.full.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/html2pdf.js/0.10.1/html2pdf.bundle.min.js"></script>

  <!-- Ícones -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css"/>

  <style>
    :root{
      --bg:#0F172A;
      --card:#1E293B;
      --text-main:#F1F5F9;
      --text-soft:#CBD5E1;

      --icon:#FB8C00;
      --number:#8E24AA;
      --masc:#2ED8C3;
    }

    body{
      margin:0;
      font-family:"Segoe UI",Roboto,Arial,sans-serif;
      background:var(--bg);
      color:var(--text-main);
    }

    /* ================= HEADER ================= */
    header{
      position:sticky;
      top:0;
      z-index:100;
      padding:14px 28px;
      display:flex;
      align-items:center;
      gap:14px;
      background:linear-gradient(90deg,#0F172A,#111827);
      box-shadow:0 8px 25px rgba(0,0,0,.5);
    }

    header img{ height:42px }

    header h1{
      margin:0;
      font-size:20px;
      font-weight:600;
    }

    header span{
      font-size:12px;
      color:var(--text-soft);
    }

    .container{ padding:28px }

    /* ================= FILTROS ================= */
    .filtros{
      display:grid;
      grid-template-columns:1.6fr repeat(4,1fr) auto;
      gap:14px;
      margin-bottom:28px;
      align-items:end;
    }

    .filtro-box{
      display:flex;
      flex-direction:column;
      gap:6px;
    }

    label{
      font-size:12px;
      color:var(--text-soft);
    }

    input, select{
      background:#020617;
      color:#fff;
      border:1px solid #334155;
      border-radius:10px;
      padding:10px 12px;
      font-weight:600;
    }

    .fonte-descricao{
      font-size:11px;
      color:var(--text-soft);
      line-height:1.4;
    }

    .download-btn{
      height:46px;
      width:56px;
      border:none;
      border-radius:12px;
      background:var(--icon);
      color:#fff;
      font-size:18px;
      cursor:pointer;
      display:flex;
      align-items:center;
      justify-content:center;
      box-shadow:0 8px 20px rgba(0,0,0,.4);
    }

    /* ================= CARDS ================= */
    .cards{
      display:grid;
      grid-template-columns:repeat(5,1fr);
      gap:16px;
      margin-bottom:28px;
    }

    .card{
      background:var(--card);
      border-radius:14px;
      padding:18px;
      text-align:center;
      box-shadow:0 10px 25px rgba(0,0,0,.4);
    }

    .card i{
      font-size:20px;
      color:var(--icon);
      margin-bottom:6px;
    }

    .card h3{
      font-size:13px;
      margin:6px 0;
      color:var(--text-soft);
      font-weight:500;
    }

    .card span{
      font-size:30px;
      font-weight:800;
      color:var(--number);
    }

    /* ================= GRÁFICOS ================= */
    .grid{
      display:grid;
      grid-template-columns:1fr 1fr;
      gap:20px;
      margin-bottom:20px;
    }

    .box{
      background:var(--card);
      border-radius:16px;
      padding:18px;
      box-shadow:0 15px 35px rgba(0,0,0,.45);
    }

    .box h4{
      margin:0 0 14px;
      font-size:14px;
      font-weight:600;
    }

    canvas{
      width:100%!important;
      height:300px!important;
    }

    /* ================= PICTOGRAMA ================= */
    #pictogramaSexo{
      display:flex;
      justify-content:space-between;
      align-items:flex-end;
      min-height:280px;
      padding:0 30px;
    }

    footer{
      text-align:center;
      padding:18px;
      color:#64748b;
      font-size:13px;
    }
  </style>
</head>

<body>

<header>
  <img src="assets/logo-falcandra.png" alt="Falcandra Data Consulting">
  <div>
    <h1>Dashboard de Gestão Patrimonial - APRODET</h1>
    <span>Falcandra Data Consulting</span>
  </div>
</header>

<div class="container">

  <!-- ================= FILTROS ================= -->
  <div class="filtros">
    <div class="filtro-box">
      <label>Fonte de Dados</label>
      <input type="file" id="fileInput" accept=".xlsx,.xls,.csv">
      <div class="fonte-descricao">
        Carregue um ficheiro Excel (.xlsx) com os dados de património, incluindo ID do item, categoria, valor de aquisição, etc.
      </div>
    </div>

    <div class="filtro-box">
      <label>Categoria</label>
      <select id="categoryFilter"></select>
    </div>

    <div class="filtro-box">
      <label>Distrito</label>
      <select id="districtFilter"></select>
    </div>

    <div class="filtro-box">
      <label>Estado de Conservação</label>
      <select id="statusFilter">
        <option value="">Todos</option>
        <option value="Bom">Bom</option>
        <option value="Regular">Regular</option>
        <option value="Ruim">Ruim</option>
      </select>
    </div>

    <div class="filtro-box">
      <label>Valor Mínimo (MZN)</label>
      <input type="number" id="minValue" value="0" />
    </div>

    <div class="filtro-box">
      <label>Valor Máximo (MZN)</label>
      <input type="number" id="maxValue" value="50000" />
    </div>

    <button class="download-btn" id="btnDownload" title="Baixar dashboard em PDF">
      <i class="fa-solid fa-download"></i>
    </button>
  </div>

  <!-- ================= CARDS ================= -->
  <div class="cards">
    <div class="card"><i class="fa-solid fa-box"></i><h3>Total de Itens</h3><span id="totalItems">0</span></div>
    <div class="card"><i class="fa-solid fa-coins"></i><h3>Valor Total</h3><span id="totalValue">MZN 0,00</span></div>
    <div class="card"><i class="fa-solid fa-clipboard-check"></i><h3>Estado Médio</h3><span id="avgStatus">0%</span></div>
    <div class="card"><i class="fa-solid fa-exclamation-triangle"></i><h3>Itens Críticos</h3><span id="criticalItems">0</span></div>
  </div>

  <!-- ================= GRÁFICOS ================= -->
  <div class="box">
    <h4>Valor por Categoria</h4>
    <canvas id="categoryChart"></canvas>
  </div>

  <div class="grid">
    <div class="box">
      <h4>Distribuição por Estado</h4>
      <canvas id="statusChart"></canvas>
    </div>

    <div class="box">
      <h4>Valor por Distrito</h4>
      <canvas id="districtChart"></canvas>
    </div>
  </div>

</div>

<footer>
  © Falcandra Data Consulting · Gestão Patrimonial
</footer>

<script src="main.js"></script>
</body>
</html>
